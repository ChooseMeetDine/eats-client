<md-dialog class="poll-dialog" ng-controller="showPoll" aria-label="addPoll" ng-cloak>
  <md-dialog-content layout-padding>
    <div class="md-dialog-content">

      <div id="poll-dialog-top">
        <h3 id="poll-dialog-name">{{active.data.attributes.name}}</h3>
        <md-button ng-click="cancel() " id="close" class="md-icon-button md-primary">
          <md-icon md-svg-src="images/icons/ic_close_white_24px.svg"></md-icon>
        </md-button>

        <md-button id="poll-dialog-settings" class="md-icon-button md-primary">
          <md-icon md-svg-src="images/icons/ic_settings_white_24px.svg"></md-icon>
        </md-button>

        <p id="poll-dialog-timeEnds" ng-show="now < active.data.expiresAsDateObj">
          <!--Slutar:-->{{active.data.attributes.expires | date: 'HH:mm'}}</p>

        <p id="poll-dialog-timeEnds" ng-show="now > active.data.expiresAsDateObj">Omröstningen är avslutad</p>

      </div>

      <div id="poll-dialog-restaurants">
        <h4>Restauranger:</h4> <br>
        <p ng-repeat="restaurant in activePollCleaned.restaurants" ng-click="vote(restaurant.id)">
          <b>
            {{restaurant.attributes.name}} # Röster: {{restaurant.votes.length}}
          </b>
          <span ng-if="restaurant.id === restaurantIdUserHasVotedOn"> Du ({{username}}) har röstat på den här restaurangen </span>
        </p>
        <!-- <p>ID: {{active}} </p>
                <p>allowNewRestaurants: {{active.data.attributes.allowNewRestaurants}} </p>
                <p>created: {{active.data.attributes.created}} </p>-->
      </div>

      <div>
        <p ng-repeat="vote in activePollCleaned.votes"><br>Användare: {{vote.user}} har röstat på {{vote.restaurant}}</p>
      </div>

      <!--<p>Användare: </p>-->
      <hr>
      <div id="poll-dialog-bottom">
        <p id="poll-dialog-user" ng-repeat="user in activePollCleaned.users">Namn: {{user.attributes.name}}</p>
        <md-button id="poll-dialog-sharebutton" class="md-raised md-primary">Share</md-button>
      </div>

      <div ng-if="!userIsParticipantInPoll && now < active.data.expiresAsDateObj">
        <p>Du är inte med i den här omröstningen, vill du gå med?</p>
        <md-button class="md-raised md-primary" ng-click="joinPoll()">Ja</md-button>
        <md-button class="md-raised md-primary">Nej</md-button>
      </div>
    </div>
  </md-dialog-content>
</md-dialog>
